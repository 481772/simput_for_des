<!DOCTYPE html>
<html lang="en">
<head prefix="og: http://ogp.me/ns#">
  <meta charset="utf-8">
  <title>Model definition | SimPut</title>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Canonical links -->
  <link rel="canonical" href="https://kitware.github.io/simput/docs/model.html">
  <!-- Alternative links -->
  
    
      <link rel="alternative" hreflang="en" href="https://kitware.github.io/simput/docs/model.html">
    
  
  <!-- Icon -->
  <link rel="apple-touch-icon" sizes="57x57" href="/simput/icon/apple-touch-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/simput/icon/apple-touch-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/simput/icon/apple-touch-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/simput/icon/apple-touch-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/simput/icon/apple-touch-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/simput/icon/apple-touch-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/simput/icon/apple-touch-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/simput/icon/apple-touch-icon-152x152.png">
  <link rel="icon" type="image/png" href="/simput/icon/favicon-196x196.png" sizes="196x196">
  <link rel="icon" type="image/png" href="/simput/icon/favicon-160x160.png" sizes="160x160">
  <link rel="icon" type="image/png" href="/simput/icon/favicon-96x96.png" sizes="96x96">
  <link rel="icon" type="image/png" href="/simput/icon/favicon-16x16.png" sizes="16x16">
  <link rel="icon" type="image/png" href="/simput/icon/favicon-32x32.png" sizes="32x32">
  <meta name="msapplication-TileColor" content="#2f83cd">
  <meta name="msapplication-TileImage" content="/simput/icon/mstile-144x144.png">
  <!-- CSS -->
  <!-- build:css build/css/navy.css -->
  <link rel="stylesheet" href="/simput/css/navy.css">
  <!-- endbuild -->
  <link href="https://fonts.googleapis.com/css?family=Lato:300,400,700" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css">
  <!-- RSS -->
  <link rel="alternate" href="/simput/atom.xml" title="SimPut">
  <!-- Open Graph -->
  <meta name="description" content="center.half &amp;gt; img {   width: 50%; }   SimPut works around a model definition that the user have to define initially. The model is used to describe what kind of input are needed from the user and how">
<meta property="og:type" content="website">
<meta property="og:title" content="Model definition">
<meta property="og:url" content="https://kitware.github.io/simput/docs/model.html">
<meta property="og:site_name" content="SimPut">
<meta property="og:description" content="center.half &amp;gt; img {   width: 50%; }   SimPut works around a model definition that the user have to define initially. The model is used to describe what kind of input are needed from the user and how">
<meta property="og:locale" content="en">
<meta property="og:image" content="https://kitware.github.io/simput/docs/attribute-ui.png">
<meta property="og:image" content="https://kitware.github.io/simput/docs/attr-layout.png">
<meta property="og:image" content="https://kitware.github.io/simput/docs/attr-ui-enum.png">
<meta property="og:image" content="https://kitware.github.io/simput/docs/attr-ui-bool.png">
<meta property="og:image" content="https://kitware.github.io/simput/docs/view-menu.png">
<meta property="og:updated_time" content="2018-05-08T21:15:40.314Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Model definition">
<meta name="twitter:description" content="center.half &amp;gt; img {   width: 50%; }   SimPut works around a model definition that the user have to define initially. The model is used to describe what kind of input are needed from the user and how">
<meta name="twitter:image" content="https://kitware.github.io/simput/docs/attribute-ui.png">
  <!-- Google Analytics -->
  
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-90338862-11', 'auto');
  ga('send', 'pageview');
</script>

</head>

<body>
  <div id="container">
    <header id="header" class="wrapper">
  <div id="header-inner" class="inner">
    <h1 id="logo-wrap">
      <a href="/simput/" id="logo">ParaViewWeb</a>
    </h1>
    <nav id="main-nav">
      <a href="/simput/docs/" class="main-nav-link">Docs</a>
      <a href="https://github.com/kitware/simput" class="main-nav-link"><i class="fa fa-github-alt"></i></a>
      <div id="search-input-wrap">
        <div id="search-input-icon">
          <i class="fa fa-search"></i>
        </div>
        <input type="search" id="search-input" placeholder="Search...">
      </div>
    </nav>
    <a id="mobile-nav-toggle">
      <span class="mobile-nav-toggle-bar"></span>
      <span class="mobile-nav-toggle-bar"></span>
      <span class="mobile-nav-toggle-bar"></span>
    </a>
  </div>
</header>

    <div id="content-wrap">
  <div id="content" class="wrapper">
    <div id="content-inner">
      <article class="article-container" itemscope itemtype="http://schema.org/Article">
        <div class="article-inner">
          <div class="article">
            <div class="inner">
              <header class="article-header">
                <h1 class="article-title" itemprop="name">Model definition</h1>
              </header>
              <div class="article-content" itemprop="articleBody">
                <style>
center.half > img {
  width: 50%;
}
</style>

<p>SimPut works around a model definition that the user have to define initially. The model is used to describe what kind of input are needed from the user and how those input should be layout via views.</p>
<h2 id="Format" class="article-heading"><a href="#Format" class="headerlink" title="Format"></a>Format<a class="article-anchor" href="#Format" aria-hidden="true"></a></h2><p>The model can either be a JSON or a JavaScript file. But we recommend to use the JavaScript syntax as it will allow you to use comment and ignore other restriction that JSON is enforcing.</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  output: &#123;&#125;,                                          <span class="comment">// optional if no convert.js provided</span></span><br><span class="line">  defaultActiveView: <span class="string">"NameOfTheViewInOrderToActivate"</span>, <span class="comment">// Optional</span></span><br><span class="line">  order: [],                                           <span class="comment">// List view names in order for the menu</span></span><br><span class="line">  views: &#123;&#125;,                                           <span class="comment">// Views definitions</span></span><br><span class="line">  definitions: &#123;&#125;,                                     <span class="comment">// Attributes and parameters definitions</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>vs </p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"output"</span>: &#123;&#125;,</span><br><span class="line">  <span class="attr">"defaultActiveView"</span>: <span class="string">"NameOfTheViewInOrderToActivate"</span>,</span><br><span class="line">  <span class="attr">"order"</span>: [],</span><br><span class="line">  <span class="attr">"views"</span>: &#123;&#125;,</span><br><span class="line">  <span class="attr">"definitions"</span>: &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Model-sections" class="article-heading"><a href="#Model-sections" class="headerlink" title="Model sections"></a>Model sections<a class="article-anchor" href="#Model-sections" aria-hidden="true"></a></h2><p>Let’s look closer to the various section that can exist inside a <code>model.[json/js]</code> file.</p>
<h3 id="Definitions" class="article-heading"><a href="#Definitions" class="headerlink" title="Definitions"></a>Definitions<a class="article-anchor" href="#Definitions" aria-hidden="true"></a></h3><p>The definition is the home of the various attributes that regroup parameters that we want the user to input.<br>An attribute is defined by a group of parameters with a title.<br>Each parameter is listed in an order manner and provide the following set of fields:</p>
<ul>
<li><strong>id:</strong> Identifiant that is used inside the attribute map within the view model.</li>
<li><strong>type:</strong> [‘string’, ‘double’, ‘int’, ‘bool’, …] The type is to properly convert user input from standard UI to their actual type.</li>
<li><strong>size:</strong> Provide how many values are required. -1 usually mean that the size is dynamic.</li>
<li><strong>default:</strong> Provide a default / initial value</li>
<li><strong>label <em>[option]</em>:</strong> User friendly label for the parameter name which can be provided within the /lang/ directory.</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">module.exports = &#123;</span><br><span class="line">  definitions: &#123;</span><br><span class="line">    attributeIdentifiant: &#123;</span><br><span class="line">      label: &apos;User friendly string for the attribute section&apos;,</span><br><span class="line">      parameters: [</span><br><span class="line">        &#123;</span><br><span class="line">          id: &apos;firstname&apos;,</span><br><span class="line">          type: &apos;string&apos;,</span><br><span class="line">          size: 1,</span><br><span class="line">          default: &apos;John&apos;,</span><br><span class="line">          label: &apos;First Name&apos;,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          id: &apos;lastname&apos;,</span><br><span class="line">          type: &apos;string&apos;,</span><br><span class="line">          size: 1,</span><br><span class="line">          default: &apos;Doe&apos;,</span><br><span class="line">          label: &apos;Last Name&apos;,</span><br><span class="line">        &#125;,</span><br><span class="line">      ],</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<center class="half"><br><img src="attribute-ui.png" alt="User interface of an attribute"><br>Attribute rendering example<br></center>

<h4 id="Parameter" class="article-heading"><a href="#Parameter" class="headerlink" title="Parameter"></a>Parameter<a class="article-anchor" href="#Parameter" aria-hidden="true"></a></h4><h5 id="Layout" class="article-heading"><a href="#Layout" class="headerlink" title="Layout"></a>Layout<a class="article-anchor" href="#Layout" aria-hidden="true"></a></h5><p>When size is bigger than 1 it make sense to start providing a layout hint. Below we list known layout.</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&quot;parameters&quot;: [</span><br><span class="line">  &#123;</span><br><span class="line">     &quot;id&quot;: &quot;a&quot;,</span><br><span class="line">     &quot;type&quot;: &quot;int&quot;,</span><br><span class="line">     &quot;size&quot;: 1,</span><br><span class="line">     &quot;default&quot;: 0</span><br><span class="line">  &#125;,&#123;</span><br><span class="line">     &quot;id&quot;: &quot;b&quot;,</span><br><span class="line">     &quot;type&quot;: &quot;string&quot;,</span><br><span class="line">     &quot;size&quot;: 2,</span><br><span class="line">     &quot;layout&quot;: &quot;2&quot;,</span><br><span class="line">     &quot;default&quot;: [&quot;x&quot;, &quot;y&quot;],</span><br><span class="line">     &quot;show&quot;: &quot;a[0] &gt; 5&quot;</span><br><span class="line">  &#125;,&#123;</span><br><span class="line">     &quot;id&quot;: &quot;c&quot;,</span><br><span class="line">     &quot;type&quot;: &quot;string&quot;,</span><br><span class="line">     &quot;size&quot;: 3,</span><br><span class="line">     &quot;layout&quot;: &quot;3&quot;,</span><br><span class="line">     &quot;default&quot;: [&quot;x&quot;, &quot;y&quot;, &quot;z&quot;]</span><br><span class="line">  &#125;,&#123;</span><br><span class="line">     &quot;id&quot;: &quot;d&quot;,</span><br><span class="line">     &quot;type&quot;: &quot;string&quot;,</span><br><span class="line">     &quot;size&quot;: 4,</span><br><span class="line">     &quot;default&quot;: [ &quot;1&quot;, &quot;2&quot;, &quot;3&quot;, &quot;4&quot; ]</span><br><span class="line">  &#125;,&#123;</span><br><span class="line">     &quot;id&quot;: &quot;e&quot;,</span><br><span class="line">     &quot;type&quot;: &quot;string&quot;,</span><br><span class="line">     &quot;size&quot;: 5,</span><br><span class="line">     &quot;default&quot;: [ &quot;1&quot;, &quot;2&quot;, &quot;3&quot;, &quot;4&quot;, &quot;5&quot; ]</span><br><span class="line">  &#125;,&#123;</span><br><span class="line">     &quot;id&quot;: &quot;f&quot;,</span><br><span class="line">     &quot;type&quot;: &quot;string&quot;,</span><br><span class="line">     &quot;size&quot;: 6,</span><br><span class="line">     &quot;layout&quot;: &quot;m6&quot;,</span><br><span class="line">     &quot;default&quot;: [ &quot;1&quot;, &quot;2&quot;, &quot;3&quot;, &quot;4&quot;, &quot;5&quot;, &quot;6&quot; ]</span><br><span class="line">  &#125;,&#123;</span><br><span class="line">     &quot;id&quot;: &quot;g&quot;,</span><br><span class="line">     &quot;type&quot;: &quot;string&quot;,</span><br><span class="line">     &quot;size&quot;: 6,</span><br><span class="line">     &quot;layout&quot;: &quot;2x3&quot;,</span><br><span class="line">     &quot;default&quot;: [ &quot;1&quot;, &quot;2&quot;, &quot;3&quot;, &quot;4&quot;, &quot;5&quot;, &quot;6&quot; ]</span><br><span class="line">  &#125;,&#123;</span><br><span class="line">     &quot;id&quot;: &quot;h&quot;,</span><br><span class="line">     &quot;type&quot;: &quot;string&quot;,</span><br><span class="line">     &quot;size&quot;: 6,</span><br><span class="line">     &quot;layout&quot;: &quot;3x2&quot;,</span><br><span class="line">     &quot;default&quot;: [ &quot;1&quot;, &quot;2&quot;, &quot;3&quot;, &quot;4&quot;, &quot;5&quot;, &quot;6&quot; ]</span><br><span class="line">  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<center class="half"><br><img src="attr-layout.png" alt="User interface of various layout"><br>Attribute rendering example<br></center>

<h5 id="Show" class="article-heading"><a href="#Show" class="headerlink" title="Show"></a>Show<a class="article-anchor" href="#Show" aria-hidden="true"></a></h5><p>An additional field can be provided to dynamically show or hide a given parameter based on a neighbor condition.<br>The value set is always capture within an array, which force the expression to be extracted like shown below.</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&quot;parameters&quot;: [</span><br><span class="line">  &#123;</span><br><span class="line">     &quot;id&quot;: &quot;a&quot;,</span><br><span class="line">     &quot;type&quot;: &quot;int&quot;,</span><br><span class="line">     &quot;size&quot;: 1,</span><br><span class="line">     &quot;default&quot;: 0</span><br><span class="line">  &#125;,&#123;</span><br><span class="line">     &quot;id&quot;: &quot;b&quot;,</span><br><span class="line">     &quot;type&quot;: &quot;string&quot;,</span><br><span class="line">     &quot;size&quot;: 2,</span><br><span class="line">     &quot;layout&quot;: &quot;2&quot;,</span><br><span class="line">     &quot;default&quot;: [&quot;x&quot;, &quot;y&quot;],</span><br><span class="line">     &quot;show&quot;: &quot;a[0] &gt; 5&quot;</span><br><span class="line">  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<h5 id="UI" class="article-heading"><a href="#UI" class="headerlink" title="UI"></a>UI<a class="article-anchor" href="#UI" aria-hidden="true"></a></h5><p>Sometime a single field need to have a custom presentation. A <code>ui</code> field is then use to let the user control what <em>presentation layer</em> should be used. Below are some existing <code>ui</code> implementation:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&quot;attr2&quot;: &#123;</span><br><span class="line">  &quot;parameters&quot;: [</span><br><span class="line">     &#123;</span><br><span class="line">        &quot;id&quot;: &quot;a&quot;,</span><br><span class="line">        &quot;type&quot;: &quot;int&quot;,</span><br><span class="line">        &quot;size&quot;: 1,</span><br><span class="line">        &quot;ui&quot;: &quot;enum&quot;,</span><br><span class="line">        &quot;default&quot;: [3],</span><br><span class="line">        &quot;domain&quot;: &#123;</span><br><span class="line">           &quot;Choice 1&quot;: 0,</span><br><span class="line">           &quot;Choice 2&quot;: 1,</span><br><span class="line">           &quot;Choice 3&quot;: 2,</span><br><span class="line">           &quot;Choice 4&quot;: 3,</span><br><span class="line">           &quot;Choice 5&quot;: 4</span><br><span class="line">        &#125;</span><br><span class="line">     &#125;,&#123;</span><br><span class="line">        &quot;id&quot;: &quot;b&quot;,</span><br><span class="line">        &quot;type&quot;: &quot;int&quot;,</span><br><span class="line">        &quot;size&quot;: -1,</span><br><span class="line">        &quot;ui&quot;: &quot;enum&quot;,</span><br><span class="line">        &quot;default&quot;: [0,3,4],</span><br><span class="line">        &quot;domain&quot;: &#123;</span><br><span class="line">           &quot;Choice 1&quot;: 0,</span><br><span class="line">           &quot;Choice 2&quot;: 1,</span><br><span class="line">           &quot;Choice 3&quot;: 2,</span><br><span class="line">           &quot;Choice 4&quot;: 3,</span><br><span class="line">           &quot;Choice 5&quot;: 4</span><br><span class="line">        &#125;</span><br><span class="line">     &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<center class="half"><br><img src="attr-ui-enum.png" alt="User interface of various ui"><br>Attribute rendering with different ui<br></center>

<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">   &quot;id&quot;: &quot;a&quot;,</span><br><span class="line">   &quot;type&quot;: &quot;bool&quot;,</span><br><span class="line">   &quot;size&quot;: 2,</span><br><span class="line">   &quot;ui&quot;: &quot;checkbox&quot;,</span><br><span class="line">   &quot;default&quot;: [ true, false ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<center class="half"><br><img src="attr-ui-bool.png" alt="User interface of various ui"><br>Attribute rendering with different ui<br></center>

<p>The domain in the UI can be filled by some external data. </p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">   id: &apos;fancy&apos;,</span><br><span class="line">   propType: &apos;CustomWidget&apos;, // Can be registered dynamically from an external script</span><br><span class="line">   domain: &#123;</span><br><span class="line">      external: &apos;fieldToEmbedInUIAsDomain&apos;,</span><br><span class="line">      dynamic: true, // Optional and only needed if the UI section of that parameter can not be cached</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="Conditional-attributes" class="article-heading"><a href="#Conditional-attributes" class="headerlink" title="Conditional attributes"></a>Conditional attributes<a class="article-anchor" href="#Conditional-attributes" aria-hidden="true"></a></h5><p>Parameters can be dynamically composed based on other attribute parameters and conditional expression.</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&quot;attrOr&quot;: &#123;</span><br><span class="line">   &quot;parameters&quot;: [</span><br><span class="line">      &#123;</span><br><span class="line">         &quot;id&quot;: &quot;a&quot;,</span><br><span class="line">         &quot;type&quot;: &quot;int&quot;,</span><br><span class="line">         &quot;size&quot;: 1,</span><br><span class="line">         &quot;ui&quot;: &quot;enum&quot;,</span><br><span class="line">         &quot;default&quot;: [3],</span><br><span class="line">         &quot;domain&quot;: &#123;</span><br><span class="line">            &quot;Choice 1&quot;: 1,</span><br><span class="line">            &quot;Choice 2&quot;: 2,</span><br><span class="line">            &quot;Choice 3&quot;: 3,</span><br><span class="line">            &quot;Choice 4&quot;: 4,</span><br><span class="line">            &quot;Choice 5&quot;: 5</span><br><span class="line">         &#125;,</span><br><span class="line">         &quot;help&quot;: [&quot;_self&quot;, &quot;attr1&quot;, &quot;attr2&quot;]</span><br><span class="line">      &#125;,</span><br><span class="line">      [ &quot;attr1&quot;, &quot;attr2&quot;, &quot;attr3&quot;]</span><br><span class="line">   ],</span><br><span class="line">   &quot;children&quot;: &#123;</span><br><span class="line">      &quot;attr1&quot;: &quot;attrOr.a[0] &gt;= 1&quot;,</span><br><span class="line">      &quot;attr2&quot;: &quot;attrOr.a[0] === 2&quot;,</span><br><span class="line">      &quot;attr3&quot;: &quot;attrOr.a[0] === 3&quot;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<h3 id="Views" class="article-heading"><a href="#Views" class="headerlink" title="Views"></a>Views<a class="article-anchor" href="#Views" aria-hidden="true"></a></h3><p>Views are meant to gather several attribute/parameter into a meaningful pages that get driven based on a side menu.<br>The label for a view is what will be display in the side menu for selecting a given view/page.<br>The content of the page will be defined by the <strong>attributes</strong> array content that was describe above.<br>When no <strong>attributes</strong> are given, a <strong>children</strong> should be used to create a nested list of other views.<br>The <strong>size</strong> for a view is used when you want to dynamically create/delete a given view.</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">views : &#123;</span><br><span class="line">   SingleView: &#123;</span><br><span class="line">      label: &apos;Single View&apos;,</span><br><span class="line">      attributes: [ &apos;attr1&apos; ]</span><br><span class="line">   &#125;,</span><br><span class="line">   ViewWithChildren: &#123;</span><br><span class="line">      label: &apos;View with children&apos;,</span><br><span class="line">      children: [ &apos;SubView1&apos;, &apos;SubView2&apos;, &apos;SubView3&apos; ]</span><br><span class="line">   &#125;,</span><br><span class="line">   MultiView: &#123;</span><br><span class="line">      label: &apos;Multi-view&apos;,</span><br><span class="line">      size: -1,</span><br><span class="line">      attributes: [ &apos;attr1&apos; ]</span><br><span class="line">   &#125;,</span><br><span class="line">   ViewWithOr: &#123;</span><br><span class="line">      attributes: [ &apos;attrOr&apos; ]</span><br><span class="line">   &#125;,</span><br><span class="line">   SubView1: &#123;...&#125;,</span><br><span class="line">   SubView2: &#123;...&#125;,</span><br><span class="line">   SubView3: &#123;...&#125;,</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<center class="half"><br><img src="view-menu.png" alt="View menu"><br>View menu<br></center>

<p>To a view can be attached hooks to dynamically massage the data between transitions. This allow for instance to copy the dynamic view name into a parameter of a given attribute or expose a set of view data into some external domain so they could be used somewhere else in the input definition.</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">views : &#123;</span><br><span class="line">   SingleView: &#123;</span><br><span class="line">      label: &apos;Single View&apos;,</span><br><span class="line">      attributes: [ &apos;attr1&apos; ],</span><br><span class="line">      hooks: [</span><br><span class="line">        // &#123; type: &apos;copyViewNameToAttributeParameter&apos;, attribute: &apos;attributeName.parameterId&apos; &#125;, // Type available by default</span><br><span class="line">        &#123; type: &apos;copyParameterToViewName&apos;, attribute: &apos;attributeName.parameterId&apos; &#125;,          // Type available by default</span><br><span class="line">        &#123; type: &apos;yourCustomHook&apos;, ...what-ever-you-want... &#125;,                                 // User defined hook dynamically registered</span><br><span class="line">      ],</span><br><span class="line">      readOnly: true,</span><br><span class="line">   &#125;,</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>Note the <code>readOnly</code> option disable the view name edition from the side menu which works well if you want to use a parameter to define that view name.<br>The <code>noDelete</code> option disable the delete action on the view. That flag can either be define at the view definition or inside the <code>currentViewData</code> that the hooks are getting passed. The ‘readOnly’ flag follow the same pattern regarding where its definition can be provided.   </p>
<p>To register your own hooks, you will have to create a <code>hooks.js</code> next to your model file. The following listing illustrate what that file should looks like.</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">function getExternal(dataModel) &#123;</span><br><span class="line">  if (!dataModel.external) &#123;</span><br><span class="line">    dataModel.external = &#123;&#125;;</span><br><span class="line">  &#125;</span><br><span class="line">  return dataModel.external;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function pushMaterialsToExternalHook(hookConfig, dataModel, currentViewData, modelDefinition) &#123;</span><br><span class="line">  const external = getExternal(dataModel);</span><br><span class="line"></span><br><span class="line">  // Fill materials</span><br><span class="line">  if (dataModel.data.Materials) &#123;</span><br><span class="line">    const mats = dataModel.data.Materials;</span><br><span class="line">    external.materials = &#123;&#125;;</span><br><span class="line">    for (let i = 0; i &lt; mats.length; i++) &#123;</span><br><span class="line">      const name = mats[i].name;</span><br><span class="line">      const currentMaterial = &#123; name &#125;;</span><br><span class="line">      // Gather material fields</span><br><span class="line">      Object.keys(mats[i].material).forEach((key) =&gt; &#123;</span><br><span class="line">        currentMaterial[key] = mats[i].material[key].value[0];</span><br><span class="line">      &#125;);</span><br><span class="line"></span><br><span class="line">      // save to external</span><br><span class="line">      external.materials[name] = currentMaterial;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function paramToViewName(hookConfig, dataModel, currentViewData) &#123;</span><br><span class="line">  const [attributeName, parameterId] = hookConfig.attribute.split(&apos;.&apos;);</span><br><span class="line">  currentViewData.name = currentViewData[attributeName][parameterId].value[0];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">module.exports = function initialize() &#123;</span><br><span class="line">  Simput.registerHook(&apos;materialsToExternal&apos;, pushMaterialsToExternalHook);</span><br><span class="line">  Simput.registerHook(&apos;paramToViewName&apos;, paramToViewName);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>Hooks can also be used to alter the model definition in order to add or remove views in the <strong>order</strong> list.</p>
<h3 id="Order" class="article-heading"><a href="#Order" class="headerlink" title="Order"></a>Order<a class="article-anchor" href="#Order" aria-hidden="true"></a></h3><p>The order is used to define the side menu to provide the list of view in an ordered manner.</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">order: [</span><br><span class="line">   &apos;SingleView&apos;,</span><br><span class="line">   &apos;ViewWithChildren&apos;,</span><br><span class="line">   &apos;MultiView&apos;,</span><br><span class="line">   &apos;ViewWithOr&apos;,</span><br><span class="line">   &apos;AllTypes&apos;,</span><br><span class="line">],</span><br></pre></td></tr></table></figure>
<h3 id="Output" class="article-heading"><a href="#Output" class="headerlink" title="Output"></a>Output<a class="article-anchor" href="#Output" aria-hidden="true"></a></h3><p>When a <code>convert.js</code> is not provided, additional information can be provided to define what should be generated as output based on the currently defined data model.</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">output: &#123;</span><br><span class="line">  &apos;data.json&apos;: &#123; type: &apos;default&apos; &#125;,</span><br><span class="line">  &apos;other.xml&apos;: &#123; type: &apos;template&apos;, template: &apos;./templates/vera-xml.hbs&apos; &#125;,</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>Currently only 2 types are available [<strong>default</strong> or <strong>template</strong>]:</p>
<ul>
<li>The <strong>default</strong> mode is just going to serialize the data model into JSON.</li>
<li>The <strong>template</strong> mode allow the user to define a <a href="https://handlebarsjs.com/block_helpers.html" target="_blank" rel="noopener"><em>Handlebars</em></a> template to convert the JSON structure into any other format. </li>
</ul>
<p>The output section require additional an additional <strong>output</strong> field inside each <code>view</code> definition.</p>
<h4 id="Output-inside-views" class="article-heading"><a href="#Output-inside-views" class="headerlink" title="Output inside views"></a>Output inside views<a class="article-anchor" href="#Output-inside-views" aria-hidden="true"></a></h4><p>On a view which list a set of <em>attributes</em>, you’ll need to define an <strong>output</strong> array that will define a mapping between view attributes into output data model.</p>
<p>Here is an example:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">output: [</span><br><span class="line">  &#123;</span><br><span class="line">    extract: [&apos;name&apos;, &apos;density&apos;, &apos;thexp&apos;, &apos;fractions&apos;],</span><br><span class="line">    src: &apos;material&apos;,</span><br><span class="line">    dst: [</span><br><span class="line">      &apos;CASEID.CORE.Materials.Material_&#123;name&#125;.name=name&apos;,</span><br><span class="line">      &apos;CASEID.CORE.Materials.Material_&#123;name&#125;.density=density&apos;,</span><br><span class="line">      &apos;CASEID.CORE.Materials.Material_&#123;name&#125;.thexp=thexp&apos;,</span><br><span class="line">      &apos;CASEID.CORE.Materials.Material_&#123;name&#125;.fractions=fractions&apos;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">],</span><br></pre></td></tr></table></figure>
<p>Each entry in that output array should be composed of:</p>
<ul>
<li><strong>extract:</strong> list the parameters that we want to output somewhere in the model.</li>
<li><strong>src:</strong> Name of the attribute that we want to extract the parameters from </li>
<li><strong>dst:</strong> List of mapping of where to store the given parameters</li>
</ul>
<p>The left side of the <em>dst</em> entry define the path of where a given parameter should be stored which is provided on the right side of the <code>=</code>.</p>
<p>When we want to fill an array with object the following pattern can be used:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&apos;root.elements[]+=name&apos;,</span><br><span class="line">&apos;root.elements.&#123;name&#125;.name=name&apos;,</span><br><span class="line">&apos;root.elements.&#123;name&#125;.density=density&apos;,</span><br><span class="line">&apos;root.elements.&#123;name&#125;.thexp=thexp&apos;,</span><br><span class="line">&apos;root.elements.&#123;name&#125;.fractions=fractions&apos;,</span><br></pre></td></tr></table></figure>
<p>The <code>.</code> on the left side are used as nesting structure inside an object.<br>The <code>{xxx}</code> are automatically replaced on the left side with the actual value of the <code>xxx</code> parameter. </p>
<h3 id="Scripts" class="article-heading"><a href="#Scripts" class="headerlink" title="Scripts"></a>Scripts<a class="article-anchor" href="#Scripts" aria-hidden="true"></a></h3><p>External scripts can be loaded for a given type by providing at the root level a <code>scripts: [],</code> section with the list of url that the type should load in order to works.<br>This can be useful to register custom widgets to edit your custom parameter.</p>

              </div>
              <footer class="article-footer">
                <time class="article-footer-updated" datetime="2018-05-08T21:15:40.314Z" itemprop="dateModified">Last updated: 2018-05-08</time>
                <a href="index.html" class="article-footer-prev" title="Overview"><i class="fa fa-chevron-left"></i><span>Prev</span></a><a href="convert.html" class="article-footer-next" title="Convert function"><span>Next</span><i class="fa fa-chevron-right"></i></a>
              </footer>
              
            </div>
          </div>
          <aside id="article-toc" role="navigation">
            <div id="article-toc-inner">
              <strong class="sidebar-title">Contents</strong>
              <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Format"><span class="toc-text">Format</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Model-sections"><span class="toc-text">Model sections</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Definitions"><span class="toc-text">Definitions</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Parameter"><span class="toc-text">Parameter</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#Layout"><span class="toc-text">Layout</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Show"><span class="toc-text">Show</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#UI"><span class="toc-text">UI</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Conditional-attributes"><span class="toc-text">Conditional attributes</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Views"><span class="toc-text">Views</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Order"><span class="toc-text">Order</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Output"><span class="toc-text">Output</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Output-inside-views"><span class="toc-text">Output inside views</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Scripts"><span class="toc-text">Scripts</span></a></li></ol></li></ol>
              <a href="#" id="article-toc-top">Back to Top</a>
            </div>
          </aside>
        </div>
      </article>
      <aside id="sidebar" role="navigation">
  <div class="inner"><strong class="sidebar-title">Getting Started</strong><a href="index.html" class="sidebar-link">Overview</a><a href="model.html" class="sidebar-link current">DataModel definition</a><a href="convert.html" class="sidebar-link">Convert function</a><strong class="sidebar-title">Example</strong><a href="vcard.html" class="sidebar-link">Address book</a></div>
</aside>
    </div>
  </div>
</div>

    <footer id="footer" class="wrapper">
  <div class="inner">
    <div id="footer-copyright">
      &copy; 2018 <a href="https://www.kitware.com/" target="_blank">Kitware Inc.</a>
    </div>
    <div id="footer-links">
      <a href="https://github.com/kitware/simput" class="footer-link" target="_blank"><i class="fa fa-github-alt"></i></a>
    </div>
  </div>
</footer>

  </div>
  <div id="mobile-nav-dimmer"></div>
  <nav id="mobile-nav">
  <div id="mobile-nav-inner">
    <ul id="mobile-nav-list">
      <a href="/simput/docs/" class="mobile-nav-link">Docs</a>
      <li class="mobile-nav-item">
        <a href="https://github.com/kitware/simput" class="mobile-nav-link" rel="external" target="_blank">GitHub</a>
      </li>
    </ul>
    
      <strong class="mobile-nav-title">Getting Started</strong><a href="index.html" class="mobile-nav-link">Overview</a><a href="model.html" class="mobile-nav-link current">DataModel definition</a><a href="convert.html" class="mobile-nav-link">Convert function</a><strong class="mobile-nav-title">Example</strong><a href="vcard.html" class="mobile-nav-link">Address book</a>
    
  </div>
  <div id="mobile-lang-select-wrap">
    <span id="mobile-lang-select-label"><i class="fa fa-globe"></i><span>English</span></span>
    <select id="mobile-lang-select" data-canonical="docs/model.html">
      
        <option value="en" selected>English</option>
      
    </select>
  </div>
</nav>
  <!-- Scripts -->
<!-- build:js build/js/main.js -->
<script src="/simput/js/lang_select.js"></script>
<script src="/simput/js/toc.js"></script>
<script src="/simput/js/mobile_nav.js"></script>
<!-- endbuild -->
<script src="https://cdn.jsdelivr.net/retinajs/1.3.0/retina.min.js" async></script>



</body>
</html>